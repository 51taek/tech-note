## 휴리스틱 설계

### 휴리스틱

> 💡 휴리스틱이란? (Google AI)

휴리스틱은 **제한된 시간이나 정보 속에서 빠르고 효율적인 의사결정을 내리기 위해 사용하는 경험적·직관적 사고방식**으로, '어림짐작' 또는 '발견법'이라고도 번역됩니다. 이는 합리적인 분석보다 간편한 방법을 선택하는 것으로, 긍정적 효과도 있지만 오류의 가능성도 내포하고 있습니다.
> 

### 바운디드 컨텍스트

- 작은 바운디드 컨텍스트로 만들려고 기능을 원하는 크기에 최적화해서 모델링하는 것보다는 그 반대로 하는 것이 훨씬 더 효과적이다.
- 즉, 모델의 어떤 기능이 포함하는 크기 그대로 바운디드 컨텍스트를 다루는 것이 좋다
- 바운디드 컨텍스트를 설계할 때는 경계를 넓게 해서 시작하자

### 비즈니스 로직 구현 패턴

- 도메인 모델과 이벤트 소싱 도메인 모델은 복잡한 비즈니스 로직을 가진 핵심 하위 도메인에 적합하다

다음과 같은 질문을 해보자

- 하위 도메인이 금전 또는 통화의 트랜잭션을 추적하거나, 일관된 감사 로그를 제공하거나, 또는 비즈니스에서 하위 도메인의 동작에 대한 심층적인 분석을 요청하는가? 그렇다면 이벤트 소싱 도메인 모델을 적용한다.
그렇지 않다면
- 하위 도메인의 비즈니스 로직이 복잡한가? 그렇다면 도메인 모델을 구현한다.
그렇지 않다면
- 하위 도메인이 복잡한 자료구조를 포함하는가? 그렇다면 액티브 레코드 패턴을 사용한다.
그렇지 않다면
- 트랜잭션 스크립트를 구현한다

<img width="543" height="260" alt="image" src="https://github.com/user-attachments/assets/a0b57e7e-eb69-4bf7-bc2f-d97c5e126aa1" />


### 아키텍처 패턴

- 이벤트 소싱 도메인 모델은 CQRS가 필요하다. 그렇지 않으면 시스템은 데이터 질의 옵견이 극심하게 제한되어 자신의 ID만으로 단일 인스턴스를 가져와야 한다
- 도메인 모델은 포트와 어댑터 아키텍처가 필요하다. 계층형 아키텍처에서는 여ㅇ속성에 대한 고려 없이 애그리게이트와 밸류 오브젝트를 만들기가 어렵다
- 액티브 레코드 패턴은 어플리케이션(서비스) 계층을 추가한 계층형 아키텍처와 잘 어울린다. 이는 액티브 레코드를 제어하는 로직을 위한 것이다
- 트랜잭션 스크립트 패턴은 세 개의 계층만으로 이어진 최소한의 계층형 아키텍처를 적용하여 구현할 수 있다
- 예외로 CQRS는 이벤트 소싱 도메인 모델 뿐만 아니라 하위 도메인이 여러 영속 모델에 있는 데이터를 표현할 필요가 있는 경우에도 도움이 된다

<img width="564" height="378" alt="image" src="https://github.com/user-attachments/assets/f1b0cddb-aa88-4470-bbeb-ee22dd17b8c4" />

### 테스트 전략

<img width="412" height="294" alt="image" src="https://github.com/user-attachments/assets/1cf5e721-3969-42e6-8c7b-9d53091d84e9" />
